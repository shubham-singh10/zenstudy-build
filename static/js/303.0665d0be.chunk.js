"use strict";(self.webpackChunkzenstudy_frontend=self.webpackChunkzenstudy_frontend||[]).push([[303],{8861:(e,s,t)=>{t.d(s,{I:()=>a.A});var a=t(8289),r=(t(7718),t(9671));const n={apiKey:"AIzaSyDIAQat6BiMvf-tFNomBJt19k9318U4QUg",authDomain:"zenstudy-d4c4c.firebaseapp.com",projectId:"zenstudy-d4c4c",storageBucket:"zenstudy-d4c4c.appspot.com",messagingSenderId:"406542645075",appId:"1:406542645075:web:216c82f54462d35a3713a6",measurementId:"G-C4MW5RMTWW"};a.A.initializeApp(n);(0,r.c7)(a.A.initializeApp(n))},9303:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var a=t(5043),r=t(6446),n=t(7383),o=t(9104),i=t(3216),l=t(6720),c=t(4858),d=t(5200),p=t(8861),u=t(7466),h=t(64),m=t.n(h),x=t(579);const w=()=>{const[e,s]=(0,a.useState)({phone:"",password:"",cpassword:""}),[t,h]=(0,a.useState)(!1),[w,f]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),[N,P]=(0,a.useState)(40),[v,S]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),[I,O]=(0,a.useState)(null),[z,k]=(0,a.useState)(""),{register:C,handleSubmit:E,formState:{errors:R},watch:V}=(0,c.mN)(),{register:q,handleSubmit:W,formState:{errors:Z}}=(0,c.mN)(),_=(0,i.Zp)(),B=V("password"),J=async e=>{try{window.recaptchaVerifier||(window.recaptchaVerifier=new p.I.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:()=>{}}));const s=window.recaptchaVerifier,t=await p.I.auth().signInWithPhoneNumber(e,s);O(t.verificationId),j(!0),M(),m().fire({icon:"success",title:"OTP Sent",text:"OTP has been sent to ".concat(e)})}catch(s){console.error("Error sending OTP:",s),m().fire({icon:"error",title:"Error",text:"Failed to send OTP. Please try again."})}},M=()=>{h(!0);const e=setInterval((()=>{P((s=>0===s?(clearInterval(e),h(!1),P(40),s):s-1))}),1e3)};return(0,x.jsxs)("div",{className:"p-0 lg:p-12 md:p-10",children:[(0,x.jsx)("div",{id:"recaptcha-container"}),(0,x.jsxs)("div",{className:"flex flex-col items-center lg:flex-row-reverse p-4 lg:p-12 bg-white gap-10 w-full",children:[(0,x.jsx)("div",{className:" bg-blue-600 text-center text-white p-4 lg:p-16 rounded-3xl lg:w-1/4 w-full",children:(0,x.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"Welcome to ZenStudy"})}),(0,x.jsxs)("div",{className:"flex-1 p-4 md:p-8 lg:p-8 lg:w-3/4 w-full text-center lg:text-center",children:[(0,x.jsx)("h2",{className:"text-3xl font-bold mb-4 text-blue-600",children:"Reset Your Password"}),(0,x.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"Enter your phone below to reset your password. We'll send you a otp to create a new one."}),(0,x.jsxs)("form",{className:"space-y-4 ".concat(b&&"hidden"),onSubmit:E((async e=>{S(!0),s(e);try{const s={phone:e.phone},t=await fetch("".concat("https://api.zenstudy.in/","zenstudy/api/auth/user-check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Reset failed")}"Success"===(await t.json()).message&&await J("+91".concat(e.phone))}catch(t){m().fire({icon:"error",title:"Password Reset Error",text:"An error occurred while trying to reset your password. Please try again. Error: ".concat(t.message)}),S(!0)}})),children:[(0,x.jsxs)(r.A,{sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[(0,x.jsx)(n.A,{className:"w-full",id:"phone",label:"Enter Your phone no.",variant:"outlined",...C("phone",{required:"Phone is required",minLength:{value:10,message:"Phone number must be 10 digits"},maxLength:{value:10,message:"Phone number must be 10 digits"},pattern:{value:/^\d{10}$/,message:"Phone number must be numeric"}}),error:!!R.phone,helperText:R.phone?R.phone.message:"",InputProps:{endAdornment:(0,x.jsx)(o.A,{position:"end",children:(0,x.jsx)(l.EZw,{size:25})})}}),(0,x.jsx)(n.A,{className:"w-full",id:"password",label:" Create password",variant:"outlined",type:w?"text":"password",...C("password",{required:"Password is required"}),error:!!R.password,helperText:R.password?R.password.message:"",InputProps:{endAdornment:(0,x.jsx)(o.A,{position:"end",children:w?(0,x.jsx)(d.Vap,{className:"cursor-pointer",size:25,onClick:()=>f(!1)}):(0,x.jsx)(d._NO,{className:"cursor-pointer",size:25,onClick:()=>f(!0)})})}}),(0,x.jsx)(n.A,{className:"w-full",id:"cpassword",label:"Confirm password",variant:"outlined",type:g?"text":"password",...C("cpassword",{required:"Confirm password is required",validate:e=>e===B||"Passwords do not match"}),error:!!R.cpassword,helperText:R.cpassword?R.cpassword.message:"",InputProps:{endAdornment:(0,x.jsx)(o.A,{position:"end",children:g?(0,x.jsx)(d.Vap,{className:"cursor-pointer",size:25,onClick:()=>y(!1)}):(0,x.jsx)(d._NO,{className:"cursor-pointer",size:25,onClick:()=>y(!0)})})}})]}),(0,x.jsx)("div",{className:"flex justify-end",children:v?(0,x.jsx)("button",{disabled:!0,className:"bg-red-600 text-white py-2 px-10 rounded-full",children:"Please wait..."}):(0,x.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-10 rounded-full",children:"Reset"})})]}),(0,x.jsxs)("form",{className:"space-y-4 ".concat(!b&&"hidden"),onSubmit:W((async s=>{try{A(!0);const t=(0,u.xI)(),a=u.Oe.credential(I,s.otp);await(0,u.eN)(t,a);const{phone:r,password:n}=e,o={phone:r,password:n},i=await fetch("".concat("https://api.zenstudy.in/","zenstudy/api/auth/forget"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok){const e=await i.json();throw new Error(e.message||"Reset password failed")}"Password updated successfully"===(await i.json()).message&&(m().fire({icon:"success",title:"Password Reset Successful!",text:"Your password has been successfully reset. Please proceed to log in and start exploring ZenStudy."}),_("/sign-In"))}catch(t){console.error("Error verifying OTP:",t),k("Invalid OTP. Please try again."),A(!1),m().fire({icon:"error",title:"Oops...",text:"Registration failed: Invalid OTP. Please try again."})}})),children:[(0,x.jsx)(r.A,{sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:(0,x.jsx)(n.A,{className:"w-full",id:"otp",label:"Enter OTP",variant:"outlined",...q("otp",{required:"OTP is required"}),error:!!Z.otp||!!z,helperText:Z.otp?Z.otp.message:z})}),(0,x.jsxs)("div",{className:"flex flex-col",children:[T?(0,x.jsx)("button",{disabled:!0,className:"bg-red-600 text-white py-2 px-10 rounded-full",children:"Please wait..."}):(0,x.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-10 rounded-full hover:bg-blue-800",children:"Verify OTP"}),t&&(0,x.jsxs)("p",{className:"text-gray-500 text-md mt-1",children:["Resend OTP in ",(0,x.jsx)("span",{className:"text-blue-600",children:N})," seconds"]}),!t&&(0,x.jsx)("button",{onClick:async()=>{await J("+91".concat(e.phone))},className:"w-full mt-2 py-2 px-4 bg-yellow-500 text-white rounded-full hover:bg-yellow-600",children:"Resend OTP"})]})]})]})]})]})}}}]);
//# sourceMappingURL=303.0665d0be.chunk.js.map