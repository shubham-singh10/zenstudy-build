"use strict";(self.webpackChunkzenstudy_frontend=self.webpackChunkzenstudy_frontend||[]).push([[343],{8861:(e,t,s)=>{s.d(t,{I:()=>a.A});var a=s(8289),n=(s(7718),s(9671));const r={apiKey:"AIzaSyDIAQat6BiMvf-tFNomBJt19k9318U4QUg",authDomain:"zenstudy-d4c4c.firebaseapp.com",projectId:"zenstudy-d4c4c",storageBucket:"zenstudy-d4c4c.appspot.com",messagingSenderId:"406542645075",appId:"1:406542645075:web:216c82f54462d35a3713a6",measurementId:"G-C4MW5RMTWW"};a.A.initializeApp(r);(0,n.c7)(a.A.initializeApp(r))},343:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(5043),n=s(5200),r=s(3216),i=s(5475),o=s(4858),l=s(6446),c=s(7383),d=s(9104),p=s(6720),u=s(8861),h=s(8696),m=s(7466),x=s(64),f=s.n(x),g=s(5843),w=s(579);const y=()=>{const[e,t]=(0,a.useState)({name:"",phone:"",password:"",cpassword:""}),[s,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[S,P]=(0,a.useState)(!1),[v,A]=(0,a.useState)(40),[T,O]=(0,a.useState)(!1),[z,I]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null),[V,q]=(0,a.useState)(""),{register:R,handleSubmit:E,formState:{errors:W},watch:Z}=(0,o.mN)(),{register:_,handleSubmit:J,formState:{errors:L}}=(0,o.mN)(),B=(0,r.Zp)(),F=Z("password"),{ref:M,inView:U}=(0,g.Wx)({triggerOnce:!0}),{ref:D,inView:Q}=(0,g.Wx)({triggerOnce:!0}),{ref:Y,inView:G}=(0,g.Wx)({triggerOnce:!0}),K=(0,h.zh)({from:{y:100,opacity:0},to:{y:Q?0:100,opacity:Q?1:0},config:{duration:500}}),$=(0,h.zh)({from:{x:-100,opacity:0},to:{x:U?0:-100,opacity:U?1:0},config:{duration:500}}),H=(0,h.zh)({from:{x:100,opacity:0},to:{x:G?0:100,opacity:G?1:0},config:{duration:500}}),X=async e=>{try{window.recaptchaVerifier||(window.recaptchaVerifier=new u.I.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:()=>{}}));const t=window.recaptchaVerifier,s=await u.I.auth().signInWithPhoneNumber(e,t);k(s.verificationId),P(!0),ee(),f().fire({icon:"success",title:"OTP Sent",text:"OTP has been sent to ".concat(e)})}catch(t){console.error("Error sending OTP:",t),f().fire({icon:"error",title:"Error",text:"Failed to send OTP. Please try again."})}},ee=()=>{x(!0);const e=setInterval((()=>{A((t=>0===t?(clearInterval(e),x(!1),A(40),t):t-1))}),1e3)};return(0,w.jsxs)("div",{className:"p-2 lg:p-12 md:p-10",children:[(0,w.jsx)("div",{id:"recaptcha-container"}),(0,w.jsxs)("div",{className:"flex flex-col items-center lg:flex-row p-4 lg:p-12 bg-white gap-10 w-full h-full",children:[(0,w.jsx)(h.CS.div,{ref:M,style:$,className:"bg-blue-600 text-center text-white p-4 lg:p-16 rounded-3xl lg:w-1/4 w-full",children:(0,w.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Welcome to ZenStudy"})}),(0,w.jsxs)("div",{className:"flex-1 p-2 lg:p-8 lg:w-3/4 w-full text-center lg:text-center",children:[(0,w.jsx)(h.CS.h2,{ref:D,style:K,className:"text-3xl font-bold mb-4 text-blue-600",children:"Join the ZenStudy Community"}),(0,w.jsx)(h.CS.p,{ref:D,style:K,className:"text-xl text-gray-600 mb-4",children:"Sign up now to start your learning journey with us."}),(0,w.jsxs)(h.CS.form,{ref:Y,style:H,className:"space-y-4 ".concat(S&&"hidden"),onSubmit:E((async e=>{O(!0),t(e);try{const t={phone:e.phone},s=await fetch("".concat("https://api.zenstudy.in/","zenstudy/api/auth/user-check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const e=await s.json();throw new Error(e.message||"Register failed")}"Success"===(await s.json()).message&&f().fire({icon:"error",title:"User Already Registered",text:"This phone number is already associated with an account. Please log in to continue."})}catch(s){await X("+91".concat(e.phone))}})),children:[(0,w.jsxs)(l.A,{sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:[(0,w.jsx)(c.A,{className:"w-full",id:"name",label:"Enter Full Name",variant:"outlined",...R("name",{required:"Name is required"}),error:!!W.name,helperText:W.name?W.name.message:"",InputProps:{endAdornment:(0,w.jsx)(d.A,{position:"end",children:(0,w.jsx)(p.LTk,{size:25})})}}),(0,w.jsx)(c.A,{className:"w-full",id:"phone",label:"Enter Your phone no.",variant:"outlined",...R("phone",{required:"Phone is required",minLength:{value:10,message:"Phone number must be 10 digits"},maxLength:{value:10,message:"Phone number must be 10 digits"},pattern:{value:/^\d{10}$/,message:"Phone number must be numeric"}}),error:!!W.phone,helperText:W.phone?W.phone.message:"",InputProps:{endAdornment:(0,w.jsx)(d.A,{position:"end",children:(0,w.jsx)(p.EZw,{size:25})})}}),(0,w.jsx)(c.A,{className:"w-full",id:"password",label:" Create password",variant:"outlined",type:y?"text":"password",...R("password",{required:"Password is required"}),error:!!W.password,helperText:W.password?W.password.message:"",InputProps:{endAdornment:(0,w.jsx)(d.A,{position:"end",children:y?(0,w.jsx)(n.Vap,{className:"cursor-pointer",size:25,onClick:()=>b(!1)}):(0,w.jsx)(n._NO,{className:"cursor-pointer",size:25,onClick:()=>b(!0)})})}}),(0,w.jsx)(c.A,{className:"w-full",id:"cpassword",label:"Confirm password",variant:"outlined",type:j?"text":"password",...R("cpassword",{required:"Confirm password is required",validate:e=>e===F||"Passwords do not match"}),error:!!W.cpassword,helperText:W.cpassword?W.cpassword.message:"",InputProps:{endAdornment:(0,w.jsx)(d.A,{position:"end",children:j?(0,w.jsx)(n.Vap,{className:"cursor-pointer",size:25,onClick:()=>N(!1)}):(0,w.jsx)(n._NO,{className:"cursor-pointer",size:25,onClick:()=>N(!0)})})}})]}),(0,w.jsxs)("div",{className:"flex justify-between",children:[(0,w.jsxs)("p",{children:["Already have an account ? ",(0,w.jsx)(i.N_,{to:"/sign-In",className:"underline text-blue-500 hover:text-blue-700",children:"Login"})]}),T?(0,w.jsx)("button",{disabled:!0,className:"bg-red-600 text-white py-2 lg:py-2 lg:px-10 px-4 rounded-full",children:"Please wait..."}):(0,w.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 lg:py-2 lg:px-10 px-4 rounded-full",children:"Register"})]})]}),(0,w.jsxs)("form",{className:"space-y-4 ".concat(!S&&"hidden"),onSubmit:J((async t=>{try{I(!0);const s=(0,m.xI)(),a=m.Oe.credential(C,t.otp);await(0,m.eN)(s,a);const{phone:n,name:r,password:i}=e,o={phone:n,name:r,password:i},l=await fetch("".concat("https://api.zenstudy.in/","zenstudy/api/auth/readerSignup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok){const e=await l.json();throw new Error(e.message||"Registration failed")}"Success"===(await l.json()).message&&(f().fire({icon:"success",title:"Registration Successful!",text:"Welcome ".concat(r,"! Your account has been created successfully. Please log in to start exploring ZenStudy.")}),B("/sign-In"))}catch(s){console.error("Error verifying OTP:",s),q("Invalid OTP. Please try again."),I(!1),f().fire({icon:"error",title:"Oops...",text:"Registration failed: Invalid OTP. Please try again."})}})),children:[(0,w.jsx)(l.A,{sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:(0,w.jsx)(c.A,{className:"w-full",id:"otp",label:"Enter OTP",variant:"outlined",..._("otp",{required:"OTP is required"}),error:!!L.otp||!!V,helperText:L.otp?L.otp.message:V})}),(0,w.jsxs)("div",{className:"flex flex-col",children:[z?(0,w.jsx)("button",{disabled:!0,className:"bg-red-600 text-white py-2 px-10 rounded-full",children:"Please wait..."}):(0,w.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-10 rounded-full hover:bg-blue-800",children:"Verify OTP"}),s&&(0,w.jsxs)("p",{className:"text-gray-500 text-md mt-1",children:["Resend OTP in ",(0,w.jsx)("span",{className:"text-blue-600",children:v})," seconds"]}),!s&&(0,w.jsx)("button",{onClick:async()=>{await X("+91".concat(e.phone))},className:"w-full mt-2 py-2 px-4 bg-yellow-500 text-white rounded-full hover:bg-yellow-600",children:"Resend OTP"})]})]})]})]})]})}}}]);
//# sourceMappingURL=343.e21f0a2d.chunk.js.map